if (self.CavalryLogger) { CavalryLogger.start_js(["z5O8m"]); }

__d("TimelineJumperCursorConfig",[],(function a(b,c,d,e,f,g){f.exports={BOUNDARY_PREFIX:"boundary",CURSOR_PREFIX:"jumper",CURSOR_DELIMITER:"_"};}),null);
__d('FBMorePager.react',['cx','OnVisible.react','React','getViewportDimensions','throttle'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l,m){j.constructor.call(this,l,m);this.$FBMorePager4=function(){this.setState({visible:true});this.state.throttledCallback();}.bind(this);this.$FBMorePager2=function(){this.$FBMorePager1&&this.props.onMore&&this.props.onMore();}.bind(this);this.state={throttledCallback:c('throttle')(function(){return this.$FBMorePager2();}.bind(this),l.throttle),visible:false};}k.prototype.componentWillReceiveProps=function(l){this.$FBMorePager3();if(this.props.throttle!==l.throttle)this.setState({throttledCallback:c('throttle')(this.$FBMorePager2,l.throttle)});};k.prototype.componentWillMount=function(){this.$FBMorePager1=true;};k.prototype.componentWillUnmount=function(){this.$FBMorePager1=false;};k.prototype.render=function(){return c('React').createElement('div',{className:"_3fv0"+(this.state.visible?' '+"_3fv1":'')},c('React').createElement(c('OnVisible.react'),{buffer:this.props.buffer,onVisible:this.$FBMorePager4,ref:'onVisible'},this.props.children));};k.prototype.$FBMorePager3=function(){this.setState({visible:false});this.refs.onVisible&&this.refs.onVisible.reset();};k.defaultProps={buffer:Math.min(c('getViewportDimensions')().height,c('getViewportDimensions')().width)*2,throttle:1000};f.exports=k;}),null);
__d('ScrollPositionFixer',['Event','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h={_bodyElement:c('nullthrows')(document.body),_domModifiedListener:null,_element:null,_htmlElement:c('nullthrows')(document.documentElement),_originalLeft:0,_originalTop:0,fixToElement:function i(j){var k=arguments.length<=1||arguments[1]===undefined?h._htmlElement:arguments[1];if(this._element)throw new Error('Scroll position fixer is already holding on to an element:'+this._element);this._element=j;this._originalTop=this._calculateElementTop();this._originalLeft=this._calculateElementLeft();this._onSubtreeModified();this._domModifiedListener=c('Event').listen(k,'DOMSubtreeModified',this._onSubtreeModified.bind(this));},release:function i(){if(!this._element)throw new Error('Scroll position fixer is not holding on to an element!');this._onSubtreeModified();this._domModifiedListener.remove();this._domModifiedListener=null;this._element=null;},_onSubtreeModified:function i(){window.scrollBy(this._calculateElementLeft()-this._originalLeft,this._calculateElementTop()-this._originalTop);},_calculateElementTop:function i(){var j=this._htmlElement.scrollTop||this._bodyElement.scrollTop;return this._element.offsetTop-j;},_calculateElementLeft:function i(){var j=this._htmlElement.scrollLeft||this._bodyElement.scrollLeft;return this._element.offsetLeft-j;}};h.fixToElement=h.fixToElement.bind(h);h.release=h.release.bind(h);f.exports=h;}),null);
__d('TimelineJumperDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d('TimelineJumperAction',['AsyncRequest','TimelineJumperDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h=60000,i={initialize:function j(k){c('TimelineJumperDispatcher').dispatch({actionType:'initialize',payload:k});},headerNavScrollTo:function j(k){c('TimelineJumperDispatcher').dispatch({actionType:'header_nav_scroll_to',payload:{key:k}});},handlePageFetchSuccess:function j(k){if(k===null)return;var l=k.isFrontFetch?'prev_page_fetch_success':'next_page_fetch_success';c('TimelineJumperDispatcher').dispatch({actionType:l,payload:{cursor:k.resultCursor,cursorToken:k.fetchToken,stories:k.stories}});},fetchURI:function j(k,l){new (c('AsyncRequest'))().setURI(k).setErrorHandler(function(m){i.pageFetchFail(l,m);}).setTimeoutHandler(h,function(m){i.pageFetchTimeout(l,m);}).send();},fetchNextPage:function j(){c('TimelineJumperDispatcher').dispatch({actionType:'fetch_next_page'});},prefetchPrevPage:function j(){c('TimelineJumperDispatcher').dispatch({actionType:'prefetch_prev_page'});},pageFetchTimeout:function j(k,l){c('TimelineJumperDispatcher').dispatch({actionType:'page_fetch_timeout',payload:{direction:k,errorCode:null,errorMessage:null}});},pageFetchFail:function j(k,l){c('TimelineJumperDispatcher').dispatch({actionType:'page_fetch_fail',payload:{direction:k,errorCode:l.getError(),errorMessage:l.getErrorDescription()}});},showPrevPage:function j(){c('TimelineJumperDispatcher').dispatch({actionType:'show_prev_page'});},clearScrollTo:function j(){c('TimelineJumperDispatcher').dispatch({actionType:'clear_scroll_to_element'});},onLeave:function j(){c('TimelineJumperDispatcher').dispatch({actionType:'on_leave'});}};f.exports=i;}),null);
__d('TimelineJumperPager.react',['ix','cx','fbt','Image.react','Link.react','Layout.react','React','XUIText.react','XUIButton.react','XUICard.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').FillColumn,n=c('Layout.react').Column;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;o.prototype.$TimelineJumperPager1=function(){return c('React').createElement(c('XUICard.react'),{className:"_2jgi"},c('React').createElement(c('Link.react'),{className:"_2jgl",href:'#',onClick:this.props.onClick,role:'button'},c('React').createElement(c('Layout.react'),{className:"_2pi1"},c('React').createElement(n,{className:"_3-8_"},c('React').createElement(c('XUIText.react'),{weight:'bold',display:'block',size:'xlarge'},this.$TimelineJumperPager2())),c('React').createElement(m,{className:"_2jgm"},c('React').createElement(c('Image.react'),{src:h("117307")})))));};o.prototype.$TimelineJumperPager2=function(){return j._("See Newer Posts");};o.prototype.$TimelineJumperPager3=function(){return c('React').createElement(c('XUIButton.react'),{className:"_2jgg",image:c('React').createElement(c('Image.react'),{src:h("128521")}),label:this.$TimelineJumperPager2(),onClick:this.props.onClick,size:'xlarge'});};o.prototype.render=function(){if(this.props.shouldUseFigHeader){return this.$TimelineJumperPager1();}else return this.$TimelineJumperPager3();};function o(){k.apply(this,arguments);}f.exports=o;}),null);
__d('TimelineJumperStoryUtil',['DataStore','FBJSON'],(function a(b,c,d,e,f,g){'use strict';var h={getTimeFromStory:function i(j){if(!j.id)return null;var k=c('DataStore').get(j,'store');if(!k)return null;var l=c('FBJSON').parse(k);return parseInt(l.timestamp,10);}};f.exports=h;}),null);
__d('TimelineMonitorElements',['Arbiter','Event','Run','Vector','ViewportBounds','TimelineJumperStoryUtil','queryThenMutateDOM','throttle'],(function a(b,c,d,e,f,g){'use strict';var h=null,i=null,j=[],k=0,l=null,m=false;function n(){j=[];h=null;i=null;k=0;l&&l.remove();l=null;m=false;}function o(){if(!l)l=c('Event').listen(window,'scroll',c('throttle')(p,50));if(!m){c('Run').onLeave(n);m=true;}p();}function p(){c('queryThenMutateDOM')(r,q,'TimelineMonitorElements/scroll');}function q(){if(i){c('Arbiter').inform(t.ELEMENT_CHANGED,i);h=i;i=null;}}function r(){var u=c('ViewportBounds').getTop()+c('Vector').getScrollPosition().y,v=s(u);if(v){if(h&&h.id===v.id){k=u;return;}var w=c('TimelineJumperStoryUtil').getTimeFromStory(v);if(!w)return;i={timestamp:w,fromAbove:k<u};}k=u;}function s(u){for(var v=0;v<j.length;v++){var w=j[v],x=c('Vector').getElementPosition(w).y+c('Vector').getElementDimensions(w).y;if(u<=x)return w;}return null;}var t={ELEMENT_CHANGED:'TimelineMonitorElements/elementChanged',monitorTopElement:function u(v){j.unshift(v);o();},monitorBottomElement:function u(v){j.push(v);o();},clear:function u(){j=[];k=0;h=null;i=null;}};f.exports=t;}),null);
__d('TimelineSectionTokenConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={KEY_MONTH_POSITION:2,KEY_YEAR_POSITION:1,LAST_MONTH_OF_YEAR:12,MIN_TOKENS_PER_KEY:2,KEY_LENGTH_WITH_MONTH:3,KEY_DELIMITER:'_',RECENT_TOKEN:'recent',MONTH_TOKEN_PREFIX:'month',YEAR_TOKEN_PREFIX:'year'};f.exports=h;}),null);
__d('TimelineSectionToken',['invariant','TimelineSectionTokenConstants','DateConsts','TimelineJumperCursorConfig'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('TimelineSectionTokenConstants').KEY_DELIMITER,j=c('TimelineSectionTokenConstants').KEY_LENGTH_WITH_MONTH,k=c('TimelineSectionTokenConstants').KEY_MONTH_POSITION,l=c('TimelineSectionTokenConstants').KEY_YEAR_POSITION,m=c('TimelineSectionTokenConstants').LAST_MONTH_OF_YEAR,n=c('TimelineSectionTokenConstants').MIN_TOKENS_PER_KEY,o=c('TimelineSectionTokenConstants').MONTH_TOKEN_PREFIX,p=c('DateConsts').MS_PER_SEC,q=c('TimelineJumperCursorConfig').CURSOR_PREFIX,r=c('TimelineJumperCursorConfig').CURSOR_DELIMITER,s={createMonthTokenWithYearAndMonth:function t(u,v){v<=12&&v>0||h(0);return o.concat(i,u.toString(),i,v.toString());},createMonthTokenWithKey:function t(u,v){var w=this.getYearFrom(u);return this.createMonthTokenWithYearAndMonth(w,v);},getMonthFrom:function t(u){var v=this._getPartsFrom(u);return v.length===j?parseInt(v[k],10):m;},getYearFrom:function t(u){var v=this._getPartsFrom(u);return parseInt(v[l],10);},getCursorFromRecentToken:function t(){var u=Date.now()/p;return q.concat(r,u.toString());},getCursorFrom:function t(u){var v=this.getYearFrom(u),w=this.getMonthFrom(u),x=(new Date(v,w,1).valueOf()/p-1).toString();return q.concat(r,x);},_getPartsFrom:function t(u){var v=u.split(i);v.length>=n||h(0);return v;}};f.exports=s;}),null);
__d('TimelineJumperStore',['fbt','FluxReduceStore','immutable','SimpleNUXMessage','SimpleNUXMessageTypes','TimelineJumperDispatcher','TimelineJumperStoryUtil','TimelineMonitorElements','TimelineSectionToken','TimelineSectionTokenConstants','DateConsts'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List,l=c('TimelineSectionTokenConstants').RECENT_TOKEN,m=c('DateConsts').MS_PER_SEC,n=2;i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {error:null,isPrevPageReady:false,nextCursor:null,nextPageLoadingToken:null,prevCursor:null,prevPageLoadingToken:null,prevPage:k([]),profileID:null,retryCount:0,scrollToElement:null,showNux:false,storyFragments:k([]),viewerID:null};};o.prototype.reduce=function(p,q){var r=q.payload;switch(q.actionType){case 'initialize':if(r){var s=!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').PROFILE_JUMPER_NUX);p=babelHelpers['extends']({},this.getInitialState(),{nextCursor:r.nextCursor,prevCursor:r.prevCursor,profileID:r.profileID,storyFragments:k(r.storyFragments),viewerID:r.viewerID,showNux:s});}break;case 'header_nav_scroll_to':if(r){var t=this.getStory(r.key);if(t){p=babelHelpers['extends']({},p,{scrollToElement:t});}else{c('TimelineMonitorElements').clear();p=this.$TimelineJumperPageStore1(r.key,p);}}break;case 'fetch_next_page':p=babelHelpers['extends']({},p,{nextPageLoadingToken:this.getNextCursor()});break;case 'prefetch_prev_page':p=babelHelpers['extends']({},p,{prevPageLoadingToken:this.getPrevCursor(),showNux:false});break;case 'next_page_fetch_success':if(r&&r.cursorToken!==this.getNextPageLoadingToken())break;if(r&&Array.isArray(r.stories)&&r.stories.length!==0){p=this.$TimelineJumperPageStore2('next_fetch',p,r);}else p=this.$TimelineJumperPageStore3('next_fetch',p);break;case 'prev_page_fetch_success':if(r&&r.cursorToken!==this.getPrevPageLoadingToken())break;if(r&&Array.isArray(r.stories)&&r.stories.length!==0){p=this.$TimelineJumperPageStore2('prev_fetch',p,r);}else p=this.$TimelineJumperPageStore3('prev_fetch',p);break;case 'page_fetch_timeout':case 'page_fetch_fail':if(!r)break;p=this.$TimelineJumperPageStore4(p,r.direction,r.errorMessage,r.errorCode);break;case 'show_prev_page':p=this.$TimelineJumperPageStore5(p);break;case 'close_nux':p=babelHelpers['extends']({},p,{showNux:false});break;case 'clear_scroll_to_element':p=babelHelpers['extends']({},p,{scrollToElement:null});break;case 'on_leave':default:p=this.getInitialState();break;}return p;};o.prototype.getError=function(){return this.getState().error;};o.prototype.getNextPageLoadingToken=function(){return this.getState().nextPageLoadingToken;};o.prototype.getPrevPageLoadingToken=function(){return this.getState().prevPageLoadingToken;};o.prototype.getIsPrevPageReady=function(){return this.getState().isPrevPageReady;};o.prototype.getNextCursor=function(){return this.getState().nextCursor;};o.prototype.getPrevCursor=function(){return this.getState().prevCursor;};o.prototype.getPrevPage=function(){return this.getState().prevPage;};o.prototype.getProfileID=function(){return this.getState().profileID;};o.prototype.getScrollToElement=function(){return this.getState().scrollToElement;};o.prototype.getShouldShowNux=function(){return this.getState().showNux;};o.prototype.getStoryFragments=function(){return this.getState().storyFragments;};o.prototype.getViewerID=function(){return this.getState().viewerID;};o.prototype.$TimelineJumperPageStore4=function(p,q,r,s){var t=s&&s===500;if(!t&&p.retryCount<n)return this.$TimelineJumperPageStore6(p,q);var u=void 0;if(!r||t){u=h._("Sorry, but this page didn't load properly. Please try again.");}else u=r;if(q==='next_fetch'){p=babelHelpers['extends']({},p,{error:u.toString()});}else p=babelHelpers['extends']({},p,{error:u.toString(),isPrevPageReady:false});return p;};o.prototype.$TimelineJumperPageStore6=function(p,q){if(q==='next_fetch'){p=babelHelpers['extends']({},p,{nextPageLoadingToken:null,retryCount:p.retryCount+1});}else p=babelHelpers['extends']({},p,{prevPageLoadingToken:null,isPrevPageReady:false,retryCount:p.retryCount+1});return p;};o.prototype.$TimelineJumperPageStore2=function(p,q,r){if(p==='prev_fetch'){q=babelHelpers['extends']({},q,{prevPageLoadingToken:null,isPrevPageReady:true,prevCursor:r.cursor,prevPage:k(r.stories)});}else{var s=this.getStoryFragments().concat(r.stories);q=babelHelpers['extends']({},q,{nextPageLoadingToken:null,nextCursor:r.cursor,storyFragments:s});}return q;};o.prototype.$TimelineJumperPageStore3=function(p,q){if(p==='prev_fetch'){q=babelHelpers['extends']({},q,{prevPageLoadingToken:null,isPrevPageReady:false,prevCursor:null,prevPage:k([])});}else q=babelHelpers['extends']({},q,{nextPageLoadingToken:null,nextCursor:null});return q;};o.prototype.$TimelineJumperPageStore5=function(p){var q=this.getPrevPage().concat(this.getStoryFragments());return babelHelpers['extends']({},p,{isPrevPageReady:false,prevPage:k([]),storyFragments:q});};o.prototype.$TimelineJumperPageStore1=function(p,q){var r=null,s=null;if(p===l){s=c('TimelineSectionToken').getCursorFromRecentToken();}else{s=c('TimelineSectionToken').getCursorFrom(p);r=s;}return babelHelpers['extends']({},this.getInitialState(),{profileID:q.profileID,nextCursor:s,prevCursor:r,showNux:q.showNux,viewerID:q.viewerID});};o.prototype.getStory=function(p){var q=this.getStoryFragments();if(q.size===0)return null;var r=void 0;if(p===l){r=Date.now()/m;}else{var s=c('TimelineSectionToken').getYearFrom(p),t=c('TimelineSectionToken').getMonthFrom(p);r=new Date(s,t,1).valueOf()/m-1;}var u=c('TimelineJumperStoryUtil').getTimeFromStory(q.first()),v=c('TimelineJumperStoryUtil').getTimeFromStory(q.last());if(!v||!u)return null;if(r>u){return null;}else if(r<v)return null;var w=void 0,x=void 0;for(var y=0;y<q.size;y++){w=q.get(y);x=c('TimelineJumperStoryUtil').getTimeFromStory(w);if(x&&x>r)continue;break;}return w;};function o(){i.apply(this,arguments);}f.exports=new o(c('TimelineJumperDispatcher'));}),null);
__d('TimelineStickyHeaderWithJumperNav',['ButtonGroup','CSS','DataStore','DOM','Event','Parent','ProfileTimelineUILogger','Run','SelectorDeprecated','SubscriptionsHandler','TimelineJumperAction','TimelineSectionToken','URI','TimelineSectionTokenConstants','DateConsts'],(function a(b,c,d,e,f,g){'use strict';var h=c('TimelineSectionTokenConstants').KEY_DELIMITER,i=c('TimelineSectionTokenConstants').KEY_LENGTH_WITH_MONTH,j=c('TimelineSectionTokenConstants').RECENT_TOKEN,k=c('TimelineSectionTokenConstants').YEAR_TOKEN_PREFIX,l=c('DateConsts').MS_PER_SEC,m={_initialized:false,_menuGroup:null,_pageMenu:null,_sectionMenu:null,_subsectionMenus:{},_subsectionMenuTemplate:null,_subscriptions:null,init:function n(o){if(this._initialized)return;this._initialized=true;this._pageMenu=c('DOM').find(o,'div.pageMenu');this._menuGroup=c('ButtonGroup').getInstance(this._pageMenu);this._sectionMenu=c('DOM').find(o,'div.sectionMenu');this._subsectionMenuTemplate=c('DOM').find(o,'div.subsectionMenu');this._subscriptions=new (c('SubscriptionsHandler'))();this._initSectionMenu();this._subscriptions.addSubscriptions(c('Event').listen(this._pageMenu,'click',function(event){return this._handleTabClick(event);}.bind(this)));c('Run').onLeave(function(){return this.reset();}.bind(this));},reset:function n(){this._initialized=false;this._menuGroup=null;this._pageMenu=null;this._sectionMenu=null;this._subsectionMenus={};this._subsectionMenuTemplate=null;this._subscriptions.release();},updateSelectedWithData:function n(o){if(!o.timestamp||!this._sectionMenu)return;var p=new Date(parseInt(o.timestamp,10)*l),q=(p.getMonth()+1).toString(),r=k.concat(h,p.getFullYear().toString());if(c('SelectorDeprecated').getOption(this._sectionMenu,r)){c('SelectorDeprecated').setSelected(this._sectionMenu,r,true);this._showOrHideSubsectionMenuForKey(r);var s=this._subsectionMenus[r];if(s)c('SelectorDeprecated').setSelected(s,q,true);}else{c('SelectorDeprecated').setSelected(this._sectionMenu,j,true);this._showOrHideSubsectionMenuForKey(j);}},_initSectionMenu:function n(){var o=c('SelectorDeprecated').getSelectorMenu(this._sectionMenu);this._subscriptions.addSubscriptions(c('Event').listen(o,'click',function(event){return this._handleClickedMenu(event);}.bind(this)));},_handleClickedMenu:function n(event){var o=event.target;if(!(o instanceof Node))return;var p=c('Parent').byTag(o,'a'),q=p&&c('DataStore').get(p,'key');if(q){c('TimelineJumperAction').headerNavScrollTo(q);c('ProfileTimelineUILogger').logStickyHeaderScrubberWithJumperClick(q);event.preventDefault();this._showOrHideSubsectionMenuForKey(q);}},_showOrHideSubsectionMenuForKey:function n(o){if(o===j){this._hideSubsectionMenus();}else this._showSubsectionMenuForKey(o);},_hideSubsectionMenus:function n(){if(this._menuGroup)this._menuGroup.hideItem(this._subsectionMenuTemplate);},_showSubsectionMenuForKey:function n(o){if(o.split(h).length===i)return;var p=this._createSubsectionMenuForKey(o);c('DOM').insertAfter(this._subsectionMenuTemplate,p);c('CSS').hide(this._subsectionMenuTemplate);for(var q in this._subsectionMenus){var r=this._subsectionMenus[q];c('CSS').conditionShow(r,r===p);}if(this._menuGroup)this._menuGroup.showItem(this._subsectionMenuTemplate);},_createSubsectionMenuForKey:function n(o){var p=this._subsectionMenus[o];if(!p){p=this._subsectionMenus[o]=this._subsectionMenuTemplate.cloneNode(true);var q=c('DOM').scry(p,'li.activityLog a')[0];if(q)q.href=new (c('URI'))(q.href).addQueryData({key:o});var r=c('DOM').scry(p,'li.monthSelector a');for(var s=0;s<r.length;s++){var t=r[s],u=t.getAttribute('data-key');t.setAttribute('data-key',c('TimelineSectionToken').createMonthTokenWithKey(o,u));}this._subscriptions.addSubscriptions(c('Event').listen(p,'click',function(event){return this._handleClickedMenu(event);}.bind(this)));}return p;},_handleTabClick:function n(event){var o=event.target;if(!(o instanceof Element))return;var p=c('Parent').byClass(o,'itemAnchor');if(p){var q=c('DataStore').get(p,'tab-key');if(q)c('ProfileTimelineUILogger').logStickyHeaderNavItemWithJumperClick(q);}}};f.exports=m;}),null);
__d("XTimelineJumperAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/timeline\/jumper\/async\/",{cursor:{type:"String"},is_front_fetch:{type:"Bool",defaultValue:false},profile_id:{type:"FBID",required:true},viewer_id:{type:"FBID"}});}),null);
__d('TimelineJumperContainer.react',['cx','fbt','Arbiter','DOMContainer.react','DOMScroll','FBMorePager.react','FluxContainer','ProfileTimelineUILogger','React','Run','ScrollPositionFixer','SimpleNUXMessage','SimpleNUXMessageTypes','TimelineJumperAction','TimelineJumperDispatcher','TimelineJumperGatingConfig','TimelineJumperPager.react','TimelineJumperStore','TimelineMonitorElements','TimelineStickyHeaderWithJumperNav','Vector','XUIAmbientNUX.react','XUINotice.react','XUISpinner.react','XTimelineJumperAsyncController','getViewportDimensions','tidyEvent'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=100;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.getStores=function(){return [c('TimelineJumperStore')];};m.calculateState=function(n){var o=c('TimelineJumperStore').getError(),p=c('TimelineJumperStore').getIsPrevPageReady(),q=c('TimelineJumperStore').getNextCursor(),r=c('TimelineJumperStore').getNextPageLoadingToken(),s=c('TimelineJumperStore').getPrevPageLoadingToken(),t=c('TimelineJumperStore').getPrevCursor(),u=c('TimelineJumperStore').getProfileID(),v=c('TimelineJumperStore').getScrollToElement(),w=c('TimelineJumperStore').getShouldShowNux(),x=c('TimelineJumperStore').getStoryFragments(),y=c('TimelineJumperStore').getViewerID();return {error:o,isPrevPageReady:p,nextCursor:q,nextPageLoadingToken:r,prevCursor:t,prevPageLoadingToken:s,profileID:u,scrollToElement:v,showNux:w,storyFragments:x,viewerID:y};};function m(n){k.constructor.call(this,n);c('TimelineJumperDispatcher').explicitlyRegisterStores([c('TimelineJumperStore')]);this.$TimelineJumperContainer5=c('TimelineJumperGatingConfig').bufferValue+c('getViewportDimensions')().height*c('TimelineJumperGatingConfig').bufferRatio;this.$TimelineJumperContainer6=true;c('TimelineJumperAction').initialize({profileID:n.profileID,nextCursor:n.initialAfterCursor,prevCursor:n.initialBeforeCursor,storyFragments:n.initialStoryFragments,viewerID:n.viewerID});c('Run').onLeave(function(){return this.reset();}.bind(this));}m.prototype.reset=function(){c('TimelineJumperAction').onLeave();};m.prototype.$TimelineJumperContainer7=function(){c('tidyEvent')(c('Arbiter').subscribe(c('TimelineMonitorElements').ELEMENT_CHANGED,function(n,o){c('TimelineStickyHeaderWithJumperNav').updateSelectedWithData(o);}));};m.prototype.$TimelineJumperContainer8=function(){if(this.state.nextPageLoadingToken===null&&this.state.nextCursor&&this.$TimelineJumperContainer6){c('TimelineJumperAction').fetchNextPage();this.$TimelineJumperContainer9('next_fetch');c('ProfileTimelineUILogger').logJumperMoreStoriesSpinnerView(this.state.nextCursor||'');this.$TimelineJumperContainer6=false;}};m.prototype.$TimelineJumperContainer10=function(){if(!this.state.isPrevPageReady&&this.state.prevPageLoadingToken===null&&this.state.prevCursor){if(this.state.showNux)this.$TimelineJumperContainer11();c('TimelineJumperAction').prefetchPrevPage();this.$TimelineJumperContainer9('prev_fetch');c('ProfileTimelineUILogger').logJumperRecentStoriesButtonClick(this.state.prevCursor||'');}};m.prototype.$TimelineJumperContainer12=function(){if(!this.state.isPrevPageReady){this.$TimelineJumperContainer10();}else c('TimelineJumperAction').showPrevPage();};m.prototype.$TimelineJumperContainer9=function(n){var o=n==='prev_fetch',p=o?this.state.prevCursor:this.state.nextCursor,q=c('XTimelineJumperAsyncController').getURIBuilder().setString('cursor',p).setFBID('profile_id',this.state.profileID).setFBID('viewer_id',this.state.viewerID).setBool('is_front_fetch',o).getURI();c('TimelineJumperAction').fetchURI(q,n);};m.prototype.componentDidMount=function(){this.$TimelineJumperContainer7();this.$TimelineJumperContainer13(null,this.state);};m.prototype.componentWillUpdate=function(n,o){if(o.isPrevPageReady)c('ScrollPositionFixer').fixToElement(this.$TimelineJumperContainer3,this.$TimelineJumperContainer2);};m.prototype.componentDidUpdate=function(n,o){if(this.state.isPrevPageReady)this.$TimelineJumperContainer12();if(this.state.nextCursor&&this.state.nextCursor.includes('jumper')&&this.$TimelineJumperContainer1){var p=c('Vector').getElementPosition(this.$TimelineJumperContainer1);window.scrollTo(0,p.y-l);}if(o.isPrevPageReady)setTimeout(c('ScrollPositionFixer').release,0);if(this.state.scrollToElement){c('DOMScroll').scrollTo(this.state.scrollToElement);c('TimelineJumperAction').clearScrollTo();}if(this.state.nextPageLoadingToken===null&&o.nextPageLoadingToken!==null)this.$TimelineJumperContainer6=true;this.$TimelineJumperContainer13(o,this.state);};m.prototype.$TimelineJumperContainer13=function(n,o){var p=o.storyFragments.size,q=n?n.storyFragments.size:0,r=p-q;if(r===0)return;if(n&&n.isPrevPageReady){var s=o.storyFragments.take(r).reverse();s.map(function(u){return c('TimelineMonitorElements').monitorTopElement(u);});}else{var t=o.storyFragments.takeLast(r);t.map(function(u){return c('TimelineMonitorElements').monitorBottomElement(u);});}};m.prototype.$TimelineJumperContainer14=function(){return c('React').createElement('div',{ref:function(n){return this.$TimelineJumperContainer1=n;}.bind(this),className:"_3fkc"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large'}));};m.prototype.$TimelineJumperContainer15=function(){var n=c('TimelineJumperGatingConfig').shouldUseFigHeader;if(this.state.error!==null&&this.state.prevPageLoadingToken!==null)return c('React').createElement(c('XUINotice.react'),{use:'warn'},this.state.error);var o=this.state.prevPageLoadingToken!==null?this.$TimelineJumperContainer16():c('React').createElement('div',null,this.$TimelineJumperContainer17(),this.$TimelineJumperContainer18()),p=null;if(this.state.storyFragments.size!==0)p=this.state.prevCursor!==null||this.state.isPrevPageReady||this.state.prevPageLoadingToken!==null?c('React').createElement('div',{className:(!n?"_5_-0":'')+(n?' '+"_5_-1":'')+(' '+"_3-96")},o):null;return p;};m.prototype.$TimelineJumperContainer16=function(){var n=c('TimelineJumperGatingConfig').shouldUseFigHeader;return c('React').createElement('div',{className:"_3bwv"+(n?' '+"_2pig":'')+(!n?' '+"_nsv":''),background:'transparent'},this.$TimelineJumperContainer14());};m.prototype.$TimelineJumperContainer17=function(){return c('React').createElement('div',{ref:function(n){return this.$TimelineJumperContainer4=n;}.bind(this)},c('React').createElement(c('TimelineJumperPager.react'),{shouldUseFigHeader:c('TimelineJumperGatingConfig').shouldUseFigHeader,onClick:function(){return this.$TimelineJumperContainer10();}.bind(this)}));};m.prototype.$TimelineJumperContainer19=function(){if(this.state.error!==null&&this.state.nextPageLoadingToken!==null)return c('React').createElement(c('XUINotice.react'),{use:'warn'},this.state.error);var n=c('React').createElement(c('FBMorePager.react'),{onMore:function(){return this.$TimelineJumperContainer8();}.bind(this),buffer:this.$TimelineJumperContainer5},this.$TimelineJumperContainer14());return this.state.nextCursor===null?null:n;};m.prototype.$TimelineJumperContainer18=function(){if(!this.state.showNux)return null;var n=i._("You can load more recent posts from this point.");return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.$TimelineJumperContainer4;}.bind(this),onCloseButtonClick:function(){return this.$TimelineJumperContainer11();}.bind(this),position:'below',shown:this.state.showNux,width:'auto',alignment:'center',key:'jumper_nux'},n);};m.prototype.$TimelineJumperContainer11=function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').PROFILE_JUMPER_NUX);this.setState({showNux:false});};m.prototype.render=function(){return c('React').createElement('div',{ref:function(n){return this.$TimelineJumperContainer2=n;}.bind(this)},this.$TimelineJumperContainer15(),this.state.storyFragments.map(function(n){return c('React').createElement(c('DOMContainer.react'),{key:n.id},n);}),c('React').createElement('div',{ref:function(n){return this.$TimelineJumperContainer3=n;}.bind(this)}),this.$TimelineJumperContainer19());};f.exports=c('FluxContainer').create(m);}),null);